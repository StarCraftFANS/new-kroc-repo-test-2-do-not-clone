<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml" xml:lang="en" lang="en">
  <head>
    <title>TVM Terminal</title>
    <link rel="stylesheet" href="styles.css" type="text/css">
    <style type="text/css">
      body {
        margin: 0px;
      }
    </style>
    <script type="text/javascript"><!--
      (function() {
        // We would like to hide overflowing lines as this can lead to
        // visually jarring results if the browser substitutes oversized
        // Unicode characters from different fonts. Unfortunately, a bug
        // in Firefox prevents it from allowing multi-line text
        // selections whenever we change the "overflow" style. So, only
        // do so for non-Netscape browsers.
        if (typeof navigator.appName == 'undefined' ||
            navigator.appName != 'Netscape') {
          document.write('<style type="text/css">' +
                         '#vt100 #console div, #vt100 #alt_console div {' +
                         '  overflow: hidden;' +
                         '}' +
                         '</style>');
        }
      })();
    --></script>
    <script type="text/javascript" src="vt100.js"></script>
    <script type="text/javascript" src="tvm_term.js"></script>
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="tvm.js"></script>
  </head>
  
  <!-- Load terminal from a timer as Konqueror sometimes fails to
       correctly deal with the enclosing frameset (if any), if we do not
       do this
   -->
  <body onload="initTerminal()">
    <noscript>JavaScript must be enabled for TVM</noscript>

    <div>
      <button onclick="fetchBytecode('test.json')">Load Bytecode</button>
      <br/>
      <button onclick="startTVM()">Start</button>&nbsp;<button onclick="stopTVM()">Stop</button>
      <br/>
      <div id="state">State: unknown</div>
    </div>
    
    <div id="listener">
      <script type="text/javascript">
         document.getElementById('listener')
            .addEventListener('load', moduleDidLoad, true);
      </script>

      <embed name="nacl_module"
       id="tvm"
       width=0 height=0
       src="tvm.nmf?v=6"
       type="application/x-nacl" />
    </div>
    
    <div id="vt100" style="border: 1px solid black; width:640px; height:480px;">
      &nbsp;
    </div>
  </body>
</html>
